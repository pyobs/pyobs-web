<ng-template #loading>
    <div class="loader"></div>
</ng-template>


<div *ngIf="image$ | async as image; else loading">
    <h2>{{image['filename']}}</h2>

    <table class="table table-bordered table-sm">
        <tr>
            <th>Observation</th>
            <th>Telescope</th>
            <th>Type</th>
            <th>Target</th>
            <th>Binning</th>
            <th>ExpTime</th>
            <th>Filter</th>
        </tr>
        <tr>
            <td><a [routerLink]="['../../observation', image.observation]">{{image.observation}}</a></td>
            <td>{{image.telescope}}</td>
            <td>{{image.image_type}}</td>
            <td>{{image.target_name}}</td>
            <td>{{image.binning}}</td>
            <td>{{image.exp_time}}s</td>
            <td>{{image.filter}}</td>
        </tr>
    </table>

    <div class="row">
        <div class="col-md-8">
            <img src="/preview/{{image.scheme}}:{{image.filename}}" width="100%">
        </div>
        <div class="col-md-4">
            <h5>FITS headers</h5>
            <div style="max-height: 500px; overflow-y: auto;">
                <table class="table table-striped table-bordered table-hover table-sm"
                       *ngIf="fits_headers$ | async as hdr">
                    <tr>
                        <th>Key</th>
                        <th>Value</th>
                    </tr>
                    <tr *ngFor="let item of hdr">
                        <td>{{item[0]}}</td>
                        <td>{{item[1]}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>